<div class="container">
  <div class="row">
    <div class="col-12">
      <h1 class="page-title text-right">Plants about</h1>
    </div>
  </div>
  <div class="row">
    <div class="col-12">
      <p class="page-title-translate"><%= @post_image.user.name %>さんの投稿</p>
    </div>
  </div>
  <div class="row">
    <div class="col-1"></div>
    <!-- 投稿詳細内容 -->
    <div class="col-10 post_images_container mt-5">
      <div class="text-center">
        <%= attachment_image_tag @post_image, :image , width: "80%", height: "80%" %>
      </div>
      <div class="postimage-title" style="width: 80%; margin: 0 auto;">
        <h2 style="font-weight: bold;"><%= @post_image.title %></h2>
      </div>
      <div class="postimage-content" style="border: dashed darkgreen 2px; border-radius: 10px; width: 80%; margin: 20px auto;">
        <p style="font-size: 18px; margin: 0;"><%= simple_format(@post_image.content) %></p>
      </div>
      <div class="post-users-content" style="margin: 0 auto; width: 80%;">
          <%= attachment_image_tag @post_image.user, :profile_image, class: "rounded-circle", size: "60x60" ,fallback: "noimage.png" %>
          <ul class="post-details">
            <li>By <%= @post_image.user.name %>　</li>
            <!-- いいね機能 -->
            <li id="favorite_<%= @post_image.id %>">
                <%= render 'favorites/favorite', post_image: @post_image %>
            </li>
            <li>コメント <%= @post_image.comments.count %></li>
          </ul>
      </div>
      <!-- コメント入力 -->
      <div class="comment-form" style="width: 80%; margin: 30px auto;">
        <%= form_for [@post_image, @comment] do |f| %>
          <%= f.text_area :comment, rows:"3", class: "form-control", placeholder: "コメントはここから" %>
          <%= f.submit "送信", class: "btn btn-primary" %>
        <% end %>
      </div>
      <!-- コメント一覧 -->
      <div class="comment-index" style="width: 80%; margin: 30px auto;">
        <table>
          <tbody class="table">
            <% @post_image.comments.each do |post_comment| %>
            <tr>
              <td class="aline-middle"><%= attachment_image_tag post_comment.user, :profile_image, size:'50x50',　fallback: "no_image.jpg" %></td>
              <td class="aline-middle"><%= post_comment.comment %></td>
              <% if post_comment.user == current_user %>
              <td class="aline-midle"><%= link_to 'Destroy', post_image_comment_path(post_comment.post_image.id, post_comment.id), method: :delete %></td>
              <% end %>
            </tr>
            <% end %>
          </tbody>
        </table>
      </div>
      <!-- 遷移リンクボタン -->
      <div class="link-btn" style="width: 80%; margin: 40px auto 20px;">
        <div class="text-left" style="width: 49%; display: inline-block;">
          <%= link_to '< Back', post_images_path %>
        </div>
        <div class="text-right" style="width: 49%; display: inline-block;">
          <%= link_to 'Edit >', edit_post_image_path(@post_image) %>
        </div>
      </div>
    </div>
    <div class="col-1"></div>
  </div>
</div>